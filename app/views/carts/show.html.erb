<div class="content-wrapper">
  <div class="profile-header" style="margin-bottom: 30px; border-bottom: 2px solid var(--primary);">
    <h1>–í–∞—à –∫–æ—à–∏–∫ üõí</h1>
  </div>

  <% if @cart_items.any? %>
    <div class="item-card" style="padding: 0; overflow: hidden;">
      <table style="width: 100%; border-collapse: collapse; color: var(--white);">
        <thead>
          <tr style="background: var(--dark-brown); text-align: left;">
            <th style="padding: 15px;">–¢–æ–≤–∞—Ä</th>
            <th style="padding: 15px;">–¶—ñ–Ω–∞</th>
            <th style="padding: 15px;">–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
            <th style="padding: 15px;">–°—É–º–∞</th>
            <th style="padding: 15px;"></th>
          </tr>
        </thead>
        <tbody>
          <% @cart_items.each do |cart_item| %>
            <tr style="border-bottom: 1px solid var(--dark-brown);">
              <td style="padding: 15px; display: flex; align-items: center; gap: 15px;">
                <div style="width: 50px; height: 50px; background: #2b2724; border-radius: 4px; display: flex; align-items: center; justify-content: center;">üé∏</div>
                <strong><%= cart_item.item.name %></strong>
              </td>
              <td style="padding: 15px;"><%= number_to_currency(cart_item.item.price, unit: "‚Ç¥") %></td>
              <td style="padding: 15px;">
                <div style="display: flex; align-items: center; gap: 10px; background: #2b2724; padding: 5px; border-radius: 6px; width: fit-content; border: 1px solid var(--muted);">
                    
                    <%# –ö–Ω–æ–ø–∫–∞ –ú—ñ–Ω—É—Å %>
                    <%= button_to cart_item_path(cart_item, operation: 'decrement'), 
                                method: :patch, 
                                class: "qty-btn", 
                                disabled: cart_item.quantity <= 1,
                                style: "background: none; border: none; color: var(--primary); cursor: pointer; font-weight: bold; font-size: 1.2rem;" do %>
                    ‚àí
                    <% end %>

                    <span style="font-weight: bold; min-width: 20px; text-align: center;">
                    <%= cart_item.quantity %>
                    </span>

                    <%# –ö–Ω–æ–ø–∫–∞ –ü–ª—é—Å %>
                    <%= button_to cart_item_path(cart_item, operation: 'increment'), 
                                method: :patch, 
                                class: "qty-btn", 
                                style: "background: none; border: none; color: var(--primary); cursor: pointer; font-weight: bold; font-size: 1.2rem;" do %>
                    +
                    <% end %>
                </div>
                </td>
              <td style="padding: 15px; color: var(--primary); font-weight: bold;">
                <%= number_to_currency(cart_item.quantity * cart_item.item.price, unit: "‚Ç¥") %>
              </td>
              <td style="padding: 15px; text-align: right;">
                <%= button_to cart_item_path(cart_item), method: :delete, class: "btn-outline", style: "color: #ff4500; border-color: #ff4500; padding: 5px 10px;" do %>
                  –í–∏–¥–∞–ª–∏—Ç–∏
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <div style="padding: 30px; display: flex; justify-content: space-between; align-items: center; background: #2b2724;">
        <div>
          <h2 style="margin: 0;">–†–∞–∑–æ–º: <span style="color: var(--primary);"><%= number_to_currency(@total_price, unit: "‚Ç¥") %></span></h2>
        </div>
        <div style="display: flex; gap: 20px;">
          <%= link_to "–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–æ–∫—É–ø–∫–∏", items_path, class: "nav-link" %>
          <%= button_to "–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ü§ò", "#", class: "btn-primary" %>
        </div>
      </div>
    </div>
  <% else %>
    <div style="text-align: center; padding: 100px 0;">
      <h2 style="color: var(--muted);">–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π... –ø–æ–∫–∏ —â–æ.</h2>
      <%= link_to "–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É", items_path, class: "btn-primary", style: "display: inline-block; margin-top: 20px;" %>
    </div>
  <% end %>
</div>