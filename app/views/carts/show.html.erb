<div class="content-wrapper">
  <div class="profile-header">
    <h1>–í–∞—à –∫–æ—à–∏–∫ üõí</h1>
  </div>

  <% if @cart_items.any? %>
    <div class="item-card item-card--flush item-card--dark">
      <table class="table--full cart-table">
        <thead>
          <tr>
            <th>–¢–æ–≤–∞—Ä</th>
            <th>–¶—ñ–Ω–∞</th>
            <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
            <th>–°—É–º–∞</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @cart_items.each do |cart_item| %>
            <tr class="table-row">
              <td class="cart-cell cart-cell--media">
                <div class="item-thumb">üé∏</div>
                <strong><%= cart_item.item.name %></strong>
              </td>
              <td><%= number_to_currency(cart_item.item.price, unit: "‚Ç¥") %></td>
              <td>
                <div class="cart-qty-wrap">
                    <%= button_to cart_item_path(cart_item, operation: 'decrement'), method: :patch, class: "qty-btn", disabled: cart_item.quantity <= 1 do %>
                    ‚àí
                    <% end %>

                    <span class="qty-count">
                      <%= cart_item.quantity %>
                    </span>

                    <%# –ö–Ω–æ–ø–∫–∞ –ü–ª—é—Å %>
                    <%= button_to cart_item_path(cart_item, operation: 'increment'), method: :patch, class: "qty-btn" do %>
                    +
                    <% end %>
                </div>
                </td>
              <td class="price" style="font-weight: bold; color: var(--primary);">
                <%= number_to_currency(cart_item.quantity * cart_item.item.price, unit: "‚Ç¥") %>
              </td>
              <td style="text-align: right;">
                <%= button_to cart_item_path(cart_item), method: :delete, class: "btn-outline btn-outline--danger btn-outline--small" do %>
                  –í–∏–¥–∞–ª–∏—Ç–∏
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <div class="cart-summary">
        <div>
          <h2>–†–∞–∑–æ–º: <span class="price"><%= number_to_currency(@total_price, unit: "‚Ç¥") %></span></h2>
        </div>
        <div style="display: flex; gap: 20px;">
          <%= link_to "–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–æ–∫—É–ø–∫–∏", items_path, class: "nav-link" %>
          <%= link_to "–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ü§ò",new_order_path,  class: "btn-primary" %>
        </div>
      </div>
    </div>
  <% else %>
    <div class="empty-cart">
      <h2>–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π... –ø–æ–∫–∏ —â–æ.</h2>
      <%= link_to "–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É", items_path, class: "btn-primary" %>
    </div>
  <% end %>
</div>