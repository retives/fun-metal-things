<div class="content-wrapper" style="display: grid; grid-template-columns: 250px 1fr; gap: 30px;">
  
  <%# –õ–Ü–í–ê –ü–ê–ù–ï–õ–¨: –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è %>
  <aside class="filter-sidebar" style="background: #2b2724; padding: 20px; border-radius: 8px; border: 1px solid var(--dark-brown); height: fit-content;">
    <%= search_form_for @q, url: items_path do |f| %>
      <h3 style="color: var(--primary); margin-top: 0;">–°–æ—Ä—Ç—É–≤–∞—Ç–∏</h3>
      <div style="margin-bottom: 20px;">
        <%= f.select :s, 
            { '–ù–æ–≤–∏–Ω–∫–∏' => 'created_at desc', '–¶—ñ–Ω–∞: –≤—ñ–¥ –¥–µ—à–µ–≤–∏—Ö' => 'price asc', '–¶—ñ–Ω–∞: –≤—ñ–¥ –¥–æ—Ä–æ–≥–∏—Ö' => 'price desc' }, 
            {}, { onchange: 'this.form.submit();', style: "width: 100%; background: #332f2c; color: white; padding: 8px; border: 1px solid var(--muted);" } %>
      </div>

      <h3 style="color: var(--primary);">–¶—ñ–Ω–∞</h3>
      <div style="display: flex; gap: 5px; margin-bottom: 20px;">
        <%= f.number_field :price_gteq, placeholder: "–í—ñ–¥", style: "width: 50%; background: #332f2c; color: white; border: 1px solid var(--muted); padding: 5px;" %>
        <%= f.number_field :price_lteq, placeholder: "–î–æ", style: "width: 50%; background: #332f2c; color: white; border: 1px solid var(--muted); padding: 5px;" %>
      </div>

      <h3 style="color: var(--primary);">–¢–µ–≥–∏</h3>
      <div style="max-height: 200px; overflow-y: auto; margin-bottom: 20px;">
        <% Tag.all.each do |tag| %>
          <label style="display: block; margin-bottom: 5px; font-size: 0.9rem;">
            <%= check_box_tag "q[tags_id_in][]", tag.id, (params[:q][:tags_id_in].include?(tag.id) if params[:q] && params[:q][:tags_id_in]) %>
            <%= tag.name %>
          </label>
        <% end %>
      </div>

      <%= f.submit "–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏", class: "btn-primary", style: "width: 100%;" %>
      <%= link_to "–°–∫–∏–Ω—É—Ç–∏", items_path, style: "display: block; text-align: center; margin-top: 10px; color: var(--muted); font-size: 0.8rem;" %>
    <% end %>
  </aside>

  <section>
    <div style="margin-bottom: 30px;">
      <%= search_form_for @q, url: items_path do |f| %>
        <div style="display: flex; gap: 10px;">
          <%= f.search_field :name_cont, placeholder: "–ü–æ—à—É–∫ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ (–Ω–∞–ø—Ä. Gibson, Marshall...)", 
              style: "flex: 1; padding: 15px; background: #2b2724; border: 2px solid var(--primary); color: white; border-radius: 6px; font-size: 1.1rem;" %>
          <%= f.submit "–®–£–ö–ê–¢–ò üîç", class: "btn-primary" %>
        </div>
      <% end %>
    </div>

    <div class="items-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; align-items: stretch;">
      <% if @items.any? %>
        <%= render @items %> 
      <% else %>
        <p style="text-align: center; padding: 50px;">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –≤–∞—à–∏–º –∑–∞–ø–∏—Ç–æ–º. ü§ò</p>
      <% end %>
    </div>
  </section>
</div>