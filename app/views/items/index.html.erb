<div class="flex flex-col lg:flex-row gap-8 max-w-7xl mx-auto px-4 py-8">
  
  <%# –õ–Ü–í–ê –ü–ê–ù–ï–õ–¨: –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è %>
  <aside class="lg:w-64 shrink-0">
    <div class="sticky top-6 bg-stone-900 p-6 rounded-2xl border border-stone-800 shadow-lg">
      <%= search_form_for @q, url: items_path do |f| %>
        <h3 class="text-primary font-bold uppercase tracking-wider text-sm mb-4">–°–æ—Ä—Ç—É–≤–∞—Ç–∏</h3>
        <div class="mb-6">
          <%= f.select :s, 
              { '–ù–æ–≤–∏–Ω–∫–∏' => 'created_at desc', '–¶—ñ–Ω–∞: –≤—ñ–¥ –¥–µ—à–µ–≤–∏—Ö' => 'price asc', '–¶—ñ–Ω–∞: –≤—ñ–¥ –¥–æ—Ä–æ–≥–∏—Ö' => 'price desc' }, 
              {}, { onchange: 'this.form.submit();', class: "w-full bg-stone-800 text-white border border-stone-700 rounded-lg p-2 text-sm focus:ring-1 focus:ring-primary outline-none" } %>
        </div>

        <h3 class="text-primary font-bold uppercase tracking-wider text-sm mb-4">–¶—ñ–Ω–∞</h3>
        <div class="flex gap-2 mb-6">
          <%= f.number_field :price_gteq, placeholder: "–í—ñ–¥", class: "w-1/2 bg-stone-800 text-white border border-stone-700 rounded-lg p-2 text-sm" %>
          <%= f.number_field :price_lteq, placeholder: "–î–æ", class: "w-1/2 bg-stone-800 text-white border border-stone-700 rounded-lg p-2 text-sm" %>
        </div>

        <h3 class="text-primary font-bold uppercase tracking-wider text-sm mb-4">–¢–µ–≥–∏</h3>
        <div class="max-h-48 overflow-y-auto space-y-2 mb-6 custom-scrollbar">
          <% Tag.all.each do |tag| %>
            <label class="flex items-center gap-3 text-stone-400 hover:text-white cursor-pointer transition-colors text-sm">
              <%= check_box_tag "q[tags_id_in][]", tag.id, (params[:q][:tags_id_in].include?(tag.id.to_s) if params[:q] && params[:q][:tags_id_in]), class: "rounded border-stone-700 bg-stone-800 text-primary focus:ring-primary" %>
              <%= tag.name %>
            </label>
          <% end %>
        </div>

        <div class="space-y-3">
          <%= f.submit "–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏", class: "w-full py-3 bg-primary hover:bg-primary-dark text-white font-bold rounded-lg transition-all cursor-pointer text-xs" %>
          <%= link_to "–°–∫–∏–Ω—É—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏", items_path, class: "block text-center text-stone-500 hover:text-stone-300 text-xs transition-colors" %>
        </div>
      <% end %>
    </div>
  </aside>

  <%# –ü–†–ê–í–ê –ß–ê–°–¢–ò–ù–ê: –ü–æ—à—É–∫ —Ç–∞ –¢–æ–≤–∞—Ä–∏ %>
  <section class="flex-1">
    <%# –†—è–¥–æ–∫ –ø–æ—à—É–∫—É %>
    <div class="mb-8">
      <%= search_form_for @q, url: items_path do |f| %>
        <div class="flex flex-col sm:flex-row gap-3">
          <div class="relative flex-1">
            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-stone-500">üîç</span>
            <%= f.search_field :name_cont, placeholder: "–ü–æ—à—É–∫ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤...", 
                class: "w-full pl-11 pr-4 py-4 bg-stone-900 border-2 border-stone-800 focus:border-primary text-white rounded-xl outline-none transition-all placeholder:text-stone-600" %>
          </div>
          <%= f.submit "–®–£–ö–ê–¢–ò", class: "px-8 py-4 bg-primary text-white font-black rounded-xl hover:scale-105 transition-transform" %>
        </div>
      <% end %>
    </div>

    <%# –°—ñ—Ç–∫–∞ —Ç–æ–≤–∞—Ä—ñ–≤ %>
    <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
      <% if @items.any? %>
        <%= render @items %> 
      <% else %>
        <div class="col-span-full py-20 text-center bg-stone-900/50 rounded-3xl border border-dashed border-stone-800">
          <span class="text-5xl block mb-4">ü§ò</span>
          <p class="text-stone-500 text-lg font-medium">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –≤–∞—à–∏–º –∑–∞–ø–∏—Ç–æ–º.</p>
        </div>
      <% end %>
    </div>
  </section>
</div>