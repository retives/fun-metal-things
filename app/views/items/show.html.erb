<div class="content-wrapper">
  <div style="margin-bottom: 20px;">
    <%= link_to '‚Üê –ù–∞–∑–∞–¥ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É', items_path, class: "nav-link", style: "color: var(--primary);" %>
  </div>

  <div class="item-detail-container" style="display: flex; gap: 40px; background: #3d3835; padding: 30px; border-radius: 12px; border: 1px solid var(--dark-brown);">
    
    <div class="item-visuals" style="flex: 1;">
      <div style="background: #2b2724; border-radius: 8px; min-height: 400px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--muted);">
        
        <!--
        <%# if @item.images.attached? %>
          <%#= image_tag @item.images.first, style: "max-width: 100%; height: auto; border-radius: 4px;" %>
        <%# else %>
          <div style="text-align: center; color: var(--muted);">
            <span style="font-size: 4rem;">üé∏</span>
            <p>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –æ—á—ñ–∫—É—î—Ç—å—Å—è</p>
          </div>
        <%# end %>
        -->
      </div>
    </div>


    <div class="item-content" style="flex: 1; display: flex; flex-direction: column;">
      <h1 style="margin-top: 0; font-size: 2.5rem; color: var(--white);"><%= @item.name %></h1>
      

      <div style="margin-bottom: 20px;">
        <% @item.tags.each do |tag| %>
          <span style="display: inline-block; border: 1px solid var(--primary); color: var(--primary); padding: 2px 10px; border-radius: 4px; font-size: 0.8rem; margin-right: 8px;">
            #<%= tag.name %>
          </span> 
        <% end %>
      </div>

      <div style="font-size: 1.1rem; color: var(--text-muted); margin-bottom: 30px; flex-grow: 1;">
        <%= @item.description %> 
      </div>

      <div style="background: var(--bg-color); padding: 20px; border-radius: 8px; border: 1px solid var(--primary);">
        <div class="price" style="font-size: 2rem; margin-bottom: 10px;">
          <%= number_to_currency(@item.price, unit: "‚Ç¥", format: "%n %u") %> 
        </div>

        <div style="margin-bottom: 20px;">
          <% if @item.is_available %>
            <span style="color: #4CAF50;">‚óè –í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ (<%= @item.quantity %> —à—Ç.)</span>
          <% else %>
            <span style="color: var(--primary);">‚óè –¢–∏–º—á–∞—Å–æ–≤–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π</span>
          <% end %>
        </div>

          <% if @item.is_available %>
            <%= button_to cart_items_path(item_id: @item.id), 
                          method: :post, 
                          class: "btn-primary", 
                          data: { turbo: false },
                          style: "width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;" do %>
              <span>–î–û–î–ê–¢–ò –í –ö–û–®–ò–ö</span> üõí
            <% end %>
          <% end %>
      </div>
    </div>
  </div>

  <%# –°–µ–∫—Ü—ñ—è –≤—ñ–¥–≥—É–∫—ñ–≤ (–í–∏–º–æ–≥–∞ 3.1.8) %>
  <div style="margin-top: 50px; border-top: 1px solid var(--dark-brown); padding-top: 30px;">
    <h2 style="color: var(--primary);">–í—ñ–¥–≥—É–∫–∏ —Ñ–∞–Ω–∞—Ç—ñ–≤</h2>
    <% if @item.reviews.any? %>
      <% @item.reviews.each do |review| %>
        <div style="background: #2b2724; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
            <strong><%= review.user.email %></strong>
            <span style="color: var(--primary);"><%= "‚òÖ" * review.rating %></span>
          </div>
          <p style="margin: 0;"><%= review.comment %></p>
        </div> 
      <% end %>
    <% else %>
      <p style="color: var(--muted);">–©–µ –Ω–µ–º–∞—î –≤—ñ–¥–≥—É–∫—ñ–≤. –°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä—à–∏–º, —Ö—Ç–æ –æ—Ü—ñ–Ω–∏—Ç—å —Ü–µ–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç!</p>
    <% end %>
  </div>
</div>