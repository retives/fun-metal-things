<!DOCTYPE html>
<html lang="uk" class="h-full">
  <head>
    <title>FunMetalThings</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <%# –î–æ–¥–∞—î–º–æ –∫–ª–∞—Å–∏ –ø—Ä—è–º–æ –≤ body –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω—É —Ç–∞ –≤—ñ–¥—Å—Ç—É–ø—É –∑–≤–µ—Ä—Ö—É %>
  <body class="bg-bg-dark text-text-white min-h-full font-sans antialiased pt-[80px]">
    
    <header class="fixed top-0 left-0 w-full h-[75px] bg-bg-dark/95 border-b-3 border-primary flex items-center justify-between px-6 md:px-[5%] z-50 backdrop-blur-md">
      
      <%= link_to root_path, class: "flex items-center gap-2 md:gap-4 no-underline shrink-0" do %>
        <div class="w-[60px] md:w-[100px] shrink-0"> 
          <%= image_tag "logo.png", style: "width: 100px; height: auto; display: block;" %>
        </div>
        <span class="text-text-white text-base md:text-xl font-extrabold uppercase tracking-tight hidden xs:block">
          FunMetalThings
        </span>
      <% end %>

      <nav class="flex items-center gap-2 md:gap-8">
        <%= link_to "–ö–∞—Ç–∞–ª–æ–≥", items_path, class: "nav-link-custom text-sm md:text-base" %>

        <div class="flex items-center gap-3 md:gap-5 border-l border-dark-accent pl-4 md:pl-8">
          <% if user_signed_in? %>
            
            <% if current_user.admin? %>
              <%= link_to admin_root_path, class: "text-primary font-bold text-[10px] md:text-xs tracking-widest hover:brightness-125" do %>
                <span class="md:hidden">–ê–î–ú–Ü–ù</span><span class="hidden md:inline">–ê–î–ú–Ü–ù</span>
              <% end %>
            <% end %>

            <%# –ö–æ—à–∏–∫ %>
            <%= link_to cart_path, class: "relative flex items-center gap-2 text-text-white no-underline hover:text-primary transition-colors" do %>
              <span class="text-xl">üõí</span>
              <% if current_cart.cart_items.any? %>
                <span class="absolute -top-2 -right-2 bg-primary text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center">
                  <%= current_cart.cart_items.sum(:quantity) %>
                </span>
              <% end %>
              <span class="hidden lg:block text-sm font-semibold uppercase">–ö–æ—à–∏–∫</span>
            <% end %>

            <%# –ü—Ä–æ—Ñ—ñ–ª—å %>
            <%= link_to profile_path, class: "flex items-center gap-2 no-underline group" do %>
              <div class="w-8 h-8 bg-dark-accent rounded-full flex items-center justify-center text-sm group-hover:bg-primary transition-colors">üë§</div>
              <span class="hidden xl:block text-xs text-text-muted max-w-[120px] truncate">
                <%= current_user.email %>
              </span>
            <% end %>

            <%= link_to "–í–∏—Ö—ñ–¥", destroy_user_session_path, data: { turbo_method: :delete }, class: "text-[10px] font-bold text-stone-500 hover:text-white transition-colors" %>
          
          <% else %>
            <%= link_to "–í—Ö—ñ–¥", new_user_session_path, class: "nav-link-custom text-sm" %>
            <%= link_to "–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è", new_user_registration_path, class: "btn-primary !py-2 !px-4 !h-auto !min-h-0 text-xs" %>
          <% end %>
        </div>
      </nav>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8">
      <% if notice %> 
        <div class="bg-green-900/30 border border-green-500 text-green-200 px-4 py-3 rounded-lg mb-6 text-xs md:text-sm">
          <%= notice %>
        </div>
      <% end %>
      
      <% if alert %> 
        <div class="bg-red-900/30 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-6 text-xs md:text-sm">
          <%= alert %>
        </div>
      <% end %>
      
      <%= yield %>
    </main>

  </body>
</html>