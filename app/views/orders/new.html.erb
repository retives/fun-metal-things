<div class="content-wrapper" style="max-width: 1100px; margin: 0 auto; padding: 40px 20px;">
  
  <div class="checkout-header" style="margin-bottom: 40px; border-bottom: 2px solid var(--primary); padding-bottom: 15px;">
    <h1 style="color: var(--primary); margin: 0; letter-spacing: 2px; font-weight: 800;">–û–§–û–†–ú–õ–ï–ù–ù–Ø –ó–ê–ú–û–í–õ–ï–ù–ù–Ø ü§ò</h1>
    <p style="color: var(--muted); margin-top: 10px;">–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –¥–∞–Ω—ñ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤–∞—à–æ–≥–æ —Å–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è</p>
  </div>

  <div class="checkout-layout" style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 40px; align-items: start;">
    

    <section class="order-form-section">
      <%= form_with model: @order, local: true, class: "metal-form" do |f| %>
        
        <div class="item-card" style="padding: 30px; background: #2b2724; border: 1px solid var(--dark-brown);">
          <h3 style="color: var(--primary); margin-top: 0; margin-bottom: 25px; border-left: 4px solid var(--primary); padding-left: 15px;">
            –ö–û–ù–¢–ê–ö–¢–ù–Ü –î–ê–ù–Ü
          </h3>

          <div class="form-group" style="margin-bottom: 20px;">
            <%= f.label :full_name, "–ü–Ü–ë –æ—Ç—Ä–∏–º—É–≤–∞—á–∞", style: "display: block; color: var(--primary); font-weight: 600; margin-bottom: 8px;" %>
            <%= f.text_field :full_name, required: true, placeholder: "–Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤", 
                style: "width: 100%; background: #332f2c; border: 1px solid var(--muted); color: white; padding: 12px; border-radius: 6px; font-size: 1rem;" %>
          </div>

          <div class="form-group" style="margin-bottom: 20px;">
            <%= f.label :phone, "–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É", style: "display: block; color: var(--primary); font-weight: 600; margin-bottom: 8px;" %>
            <%= f.text_field :phone, required: true, placeholder: "+380...", 
                style: "width: 100%; background: #332f2c; border: 1px solid var(--muted); color: white; padding: 12px; border-radius: 6px; font-size: 1rem;" %>
          </div>

          <div class="form-group" style="margin-bottom: 20px;">
            <%= f.label :address, "–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏", style: "display: block; color: var(--primary); font-weight: 600; margin-bottom: 8px;" %>
            <%= f.text_area :address, required: true, placeholder: "–ú—ñ—Å—Ç–æ, –Ω–æ–º–µ—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –ù–æ–≤–æ—ó –ü–æ—à—Ç–∏ –∞–±–æ –ø–æ–≤–Ω–∞ –∞–¥—Ä–µ—Å–∞", 
                style: "width: 100%; height: 100px; background: #332f2c; border: 1px solid var(--muted); color: white; padding: 12px; border-radius: 6px; font-size: 1rem; resize: none;" %>
          </div>

          <div class="form-group" style="margin-bottom: 30px;">
            <%= f.label :payment_method, "–°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏", style: "display: block; color: var(--primary); font-weight: 600; margin-bottom: 8px;" %>
            <%= f.select :payment_method, [['–ü—ñ—Å–ª—è–æ–ø–ª–∞—Ç–∞ (–Ω–∞–∫–ª–∞–¥–µ–Ω–∏–π –ø–ª–∞—Ç—ñ–∂)', 'cod'], ['–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–∫–æ—é (Visa/Mastercard)', 'card']], {}, 
                { style: "width: 100%; background: #332f2c; color: white; border: 1px solid var(--muted); padding: 12px; border-radius: 6px; font-size: 1rem; cursor: pointer;" } %>
          </div>

          <%= f.submit "–ü–Ü–î–¢–í–ï–†–î–ò–¢–ò –ó–ê–ú–û–í–õ–ï–ù–ù–Ø ‚ö°", class: "btn-primary", 
              style: "width: 100%; padding: 18px; font-size: 1.3rem; letter-spacing: 1px; box-shadow: 0 4px 15px rgba(207, 109, 55, 0.3);" %>
        </div>
      <% end %>
    </section>


    <aside class="order-summary-section">
      <div class="item-card" style="padding: 25px; border: 2px solid var(--primary); position: sticky; top: 100px;">
        <h3 style="margin-top: 0; border-bottom: 1px solid var(--dark-brown); padding-bottom: 15px;">–í–ê–®–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø</h3>
        
        <div class="order-items" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
          <% @cart.cart_items.each do |ci| %>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-right: 10px;">
              <div style="flex: 1;">
                <div style="font-weight: 600; color: #fff;"><%= ci.item.name %></div>
                <div style="font-size: 0.85rem; color: var(--muted);"><%= ci.quantity %> —à—Ç. √ó <%= number_to_currency(ci.item.price, unit: "‚Ç¥") %></div>
              </div>
              <div style="font-weight: 700; color: var(--primary);">
                <%= number_to_currency(ci.quantity * ci.item.price, unit: "‚Ç¥") %>
              </div>
            </div>
          <% end %>
        </div>

        <div class="total-section" style="border-top: 2px dashed var(--dark-brown); padding-top: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <span style="color: var(--muted);">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
            <span>–ó–∞ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –ø–µ—Ä–µ–≤—ñ–∑–Ω–∏–∫–∞</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 1.2rem; font-weight: 800;">–†–ê–ó–û–ú:</span>
            <span style="font-size: 1.5rem; font-weight: 800; color: var(--primary);">
              <%= number_to_currency(@cart.total_price, unit: "‚Ç¥") %>
            </span>
          </div>
        </div>

        <div style="margin-top: 20px; font-size: 0.8rem; color: var(--muted); text-align: center; font-style: italic;">
          * –ù–∞—Ç–∏—Å–∫–∞—é—á–∏ –∫–Ω–æ–ø–∫—É, –≤–∏ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—å –Ω–∞ –æ–±—Ä–æ–±–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –º—É–∑–∏—á–Ω–æ–≥–æ –¥—Ä–∞–π–≤—É.
        </div>
      </div>
    </aside>

  </div>
</div>