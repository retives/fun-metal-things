<div class="max-w-[1100px] mx-auto px-4 py-10 md:py-16">
  
  <%# –•–µ–¥–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ %>
  <div class="mb-10 border-b-2 border-primary pb-4">
    <h1 class="text-primary text-2xl md:text-4xl font-black uppercase tracking-widest leading-none">
      –û–§–û–†–ú–õ–ï–ù–ù–Ø –ó–ê–ú–û–í–õ–ï–ù–ù–Ø ü§ò
    </h1>
    <p class="text-text-muted mt-3 text-sm md:text-base">–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –¥–∞–Ω—ñ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤–∞—à–æ–≥–æ —Å–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è</p>
  </div>

  <%# –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: –Ω–∞ –º–æ–±—ñ–ª—Ü—ñ - –∫–æ–ª–æ–Ω–∫–∞, –Ω–∞ lg - —Å—ñ—Ç–∫–∞ %>
  <div class="flex flex-col-reverse lg:grid lg:grid-cols-[1.5fr_1fr] gap-8 items-start">
    
    <%# –°–ï–ö–¶–Ü–Ø –§–û–†–ú–ò %>
    <section class="w-full">
      <%= form_with model: @order, local: true do |f| %>
        <div class="bg-stone-900 p-6 md:p-8 rounded-xl border border-dark-accent shadow-2xl">
          <h3 class="text-primary font-bold uppercase tracking-wider mb-8 border-l-4 border-primary pl-4">
            –ö–û–ù–¢–ê–ö–¢–ù–Ü –î–ê–ù–Ü
          </h3>

          <div class="space-y-6">
            <div>
              <%= f.label :full_name, "–ü–Ü–ë –æ—Ç—Ä–∏–º—É–≤–∞—á–∞", class: "block text-primary font-bold mb-2 text-sm uppercase tracking-tight" %>
              <%= f.text_field :full_name, required: true, placeholder: "–Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤", 
                  class: "w-full bg-stone-800 border border-stone-700 text-white p-3 rounded-lg focus:ring-2 focus:ring-primary outline-none transition-all" %>
            </div>

            <div>
              <%= f.label :phone, "–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É", class: "block text-primary font-bold mb-2 text-sm uppercase tracking-tight" %>
              <%= f.text_field :phone, required: true, placeholder: "+380...", 
                  class: "w-full bg-stone-800 border border-stone-700 text-white p-3 rounded-lg focus:ring-2 focus:ring-primary outline-none transition-all" %>
            </div>

            <div>
              <%= f.label :address, "–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏", class: "block text-primary font-bold mb-2 text-sm uppercase tracking-tight" %>
              <%= f.text_area :address, required: true, placeholder: "–ú—ñ—Å—Ç–æ, –Ω–æ–º–µ—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –ù–æ–≤–æ—ó –ü–æ—à—Ç–∏ –∞–±–æ –ø–æ–≤–Ω–∞ –∞–¥—Ä–µ—Å–∞", 
                  class: "w-full h-28 bg-stone-800 border border-stone-700 text-white p-3 rounded-lg focus:ring-2 focus:ring-primary outline-none transition-all resize-none" %>
            </div>

            <div>
              <%= f.label :payment_method, "–°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏", class: "block text-primary font-bold mb-2 text-sm uppercase tracking-tight" %>
              <%= f.select :payment_method, [['–ü—ñ—Å–ª—è–æ–ø–ª–∞—Ç–∞ (–Ω–∞–∫–ª–∞–¥–µ–Ω–∏–π –ø–ª–∞—Ç—ñ–∂)', 'cod'], ['–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–∫–æ—é (Visa/Mastercard)', 'card']], {}, 
                  { class: "w-full bg-stone-800 border border-stone-700 text-white p-3 rounded-lg focus:ring-2 focus:ring-primary outline-none cursor-pointer" } %>
            </div>

            <div class="pt-4">
              <%= f.submit "–ü–Ü–î–¢–í–ï–†–î–ò–¢–ò –ó–ê–ú–û–í–õ–ï–ù–ù–Ø ‚ö°", class: "btn-primary w-full py-5 text-xl tracking-widest shadow-[0_4px_20px_rgba(207,109,55,0.2)]" %>
            </div>
          </div>
        </div>
      <% end %>
    </section>

    <%# –°–ï–ö–¶–Ü–Ø –ü–Ü–î–°–£–ú–ö–£ (Aside) %>
    <aside class="w-full lg:sticky lg:top-24">
      <div class="bg-stone-900 p-6 rounded-xl border-2 border-primary shadow-xl">
        <h3 class="text-white font-black uppercase border-b border-stone-800 pb-4 mb-6">–í–ê–®–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø</h3>
        
        <div class="space-y-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar mb-6">
          <% @cart.cart_items.each do |ci| %>
            <div class="flex justify-between items-start gap-4">
              <div class="flex-1">
                <div class="font-bold text-white text-sm leading-tight mb-1"><%= ci.item.name %></div>
                <div class="text-xs text-stone-500 font-mono">
                  <%= ci.quantity %> —à—Ç. √ó <%= number_to_currency(ci.item.price, unit: "‚Ç¥") %>
                </div>
              </div>
              <div class="font-bold text-primary text-sm whitespace-nowrap">
                <%= number_to_currency(ci.quantity * ci.item.price, unit: "‚Ç¥") %>
              </div>
            </div>
          <% end %>
        </div>

        <div class="border-t-2 border-dashed border-stone-800 pt-6 space-y-3">
          <div class="flex justify-between items-center text-sm">
            <span class="text-stone-500 uppercase tracking-tighter">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
            <span class="text-stone-300 italic">–ó–∞ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –ø–æ—à—Ç–∏</span>
          </div>
          <div class="flex justify-between items-center pt-2">
            <span class="text-lg font-black text-white uppercase">–†–ê–ó–û–ú:</span>
            <span class="text-2xl font-black text-primary">
              <%= number_to_currency(@cart.total_price, unit: "‚Ç¥") %>
            </span>
          </div>
        </div>

        <p class="mt-6 text-[10px] text-stone-600 text-center italic leading-relaxed">
          * –ù–∞—Ç–∏—Å–∫–∞—é—á–∏ –∫–Ω–æ–ø–∫—É, –≤–∏ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—å –Ω–∞ –æ–±—Ä–æ–±–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –º—É–∑–∏—á–Ω–æ–≥–æ –¥—Ä–∞–π–≤—É.
        </p>
      </div>
    </aside>

  </div>
</div>