<div class="max-w-xl mx-auto px-4 py-12 md:py-20 text-center">
  <div class="bg-stone-900 p-8 md:p-12 rounded-2xl border-2 border-primary shadow-[0_0_50px_rgba(207,109,55,0.1)]">
    
    <% if @order.present? && @session.present? %>
      <h2 class="text-primary text-2xl md:text-3xl font-black uppercase tracking-widest mb-8">
        –ü–ï–†–ï–•–Ü–î –î–û –û–ü–õ–ê–¢–ò üí≥
      </h2>
      
      <div class="bg-stone-800 p-6 rounded-xl mb-10 text-left border-l-4 border-primary">
        <div class="flex justify-between items-center mb-4">
          <span class="text-stone-500 text-xs uppercase font-bold">–ù–æ–º–µ—Ä –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:</span>
          <span class="text-white font-mono font-bold">#<%= @order.id.to_s.first(8).upcase %></span>
        </div>
        
        <div class="flex justify-between items-center">
          <span class="text-stone-500 text-xs uppercase font-bold">–°—É–º–∞ –¥–æ —Å–ø–ª–∞—Ç–∏:</span>
          <span class="text-primary text-2xl font-black">
            <%= number_to_currency(@order.total_price, unit: "‚Ç¥") %>
          </span>
        </div>
      </div>

      <p class="text-stone-400 mb-8 text-sm leading-relaxed">
        –ù–∞—Ç–∏—Å–Ω—É–≤—à–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ, –≤–∏ –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ñ –Ω–∞ –∑–∞—Ö–∏—â–µ–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É <span class="text-indigo-400 font-bold italic">Stripe</span> –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó.
      </p>

      <button id="checkout-button" class="btn-primary w-full py-5 text-xl tracking-widest shadow-xl transition-all hover:scale-[1.02] active:scale-95">
        –û–ü–õ–ê–¢–ò–¢–ò –ß–ï–†–ï–ó STRIPE
      </button>

      <%# JavaScript –¥–ª—è Stripe %>
      <script src="https://js.stripe.com/v3/"></script>
      <script>
        document.addEventListener('turbo:load', function() {
          var stripe = Stripe('<%= Rails.application.credentials.dig(:stripe, :publishable_key) || ENV['STRIPE_PUBLISHABLE_KEY'] %>');
          var checkoutButton = document.getElementById('checkout-button');

          if (checkoutButton) {
            checkoutButton.addEventListener('click', function() {
              stripe.redirectToCheckout({
                sessionId: '<%= @session.id %>'
              });
            });
          }
        });
      </script>

    <% else %>
      <div class="p-6 border-2 border-dashed border-red-500/50 bg-red-500/5 rounded-xl">
        <h3 class="text-red-500 font-black text-xl mb-4 uppercase">–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –æ–ø–ª–∞—Ç–∏</h3>
        
        <% if @stripe_error %>
          <div class="bg-stone-950 text-red-400 p-4 font-mono text-xs mb-6 rounded border border-red-500/20 break-words">
            Stripe error: <%= @stripe_error %>
          </div>
        <% end %>

        <%= link_to profile_path, class: "inline-flex items-center gap-2 text-stone-400 hover:text-white transition-colors uppercase font-bold text-sm" do %>
          ‚Üê –ü–û–í–ï–†–ù–£–¢–ò–°–¨ –í –ü–†–û–§–Ü–õ–¨
        <% end %>
      </div>
    <% end %>

  </div>

  <div class="mt-8 flex justify-center gap-6 opacity-40 grayscale">
    <span class="text-xs font-bold text-stone-500 uppercase">Secure Payment by Stripe</span>
    <%# –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ª–æ–≥–æ—Ç–∏–ø–∏ Visa/Mastercard —Ç—É—Ç %>
  </div>
</div>