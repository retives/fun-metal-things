<div class="content-wrapper">
  <div class="profile-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid var(--dark-brown); padding-bottom: 20px;">
    <h1>–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å üé∏</h1>
    <%= link_to "–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ", edit_profile_path, class: "btn-outline" %>
  </div>

  <div class="profile-grid" style="display: grid; grid-template-columns: 1fr 2fr; gap: 30px;">
    
    <aside class="profile-info-card" style="background: #2b2724; padding: 25px; border-radius: 12px; border: 1px solid var(--muted);">
      <h3 style="color: var(--primary); margin-top: 0;">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h3>
      <p><strong>Email:</strong> <%= current_user.email %></p>
      <p><strong>–Ü–º'—è:</strong> <%= @profile.first_name.presence || "–ù–µ –≤–∫–∞–∑–∞–Ω–æ" %></p>
      <p><strong>–ü—Ä—ñ–∑–≤–∏—â–µ:</strong> <%= @profile.last_name.presence || "–ù–µ –≤–∫–∞–∑–∞–Ω–æ" %></p>
      <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <%= @profile.phone_number.presence || "–ù–µ –≤–∫–∞–∑–∞–Ω–æ" %></p>
      <p><strong>–†–æ–ª—å:</strong> <span class="badge"><%= current_user.role.capitalize %></span></p> 
      
      <div style="margin-top: 30px; border-top: 1px solid var(--dark-brown); padding-top: 20px;">
        <%= link_to "–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å", edit_user_registration_path, style: "color: var(--primary); font-size: 0.9rem;" %> 
      </div>
    </aside>

    <section class="profile-activity">
      <div style="margin-bottom: 40px;">
        <h3 style="border-left: 4px solid var(--primary); padding-left: 15px;">–ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h3>
        <% if @orders.any? %>
          <div class="orders-history">
            <% @orders.each do |order| %>
              <div class="item-card" style="margin-bottom: 20px; padding: 20px; display: flex; justify-content: space-between; align-items: center;">
                
                <div>
                  <h3 style="margin: 0; color: var(--primary);">–ó–ê–ú–û–í–õ–ï–ù–ù–Ø ‚Ññ<%= order.id.to_s.first(8).upcase %></h3>
                  <p style="margin: 5px 0; font-size: 0.9rem; color: var(--muted);">
                    –î–∞—Ç–∞: <%= order.created_at.strftime("%d.%m.%Y") %> | 
                    –°—Ç–∞—Ç—É—Å: <span class="status-badge <%= order.status %>"><%= order.status.upcase %></span>
                  </p>
                  <p style="margin: 0; font-weight: bold;"><%= number_to_currency(order.total_amount, unit: "‚Ç¥") %></p>
                </div>

                <div style="display: flex; gap: 10px;">
                  <%= link_to "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏", order_path(order), class: "btn-outline", style: "padding: 8px 15px; font-size: 0.8rem;" %>
                  <% if order.pending? %>
                    <%= link_to "–û–ü–õ–ê–¢–ò–¢–ò üí≥", payment_order_path(order), 
                        class: "btn-primary", 
                        style: "padding: 8px 15px; font-size: 0.8rem; box-shadow: 0 0 10px rgba(207, 109, 55, 0.4);" %>
                  <% end %>
                </div>

              </div>
            <% end %>
          </div>

          <style>
            .status-badge { padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
            .status-badge.pending { background: #555; color: #fff; }
            .status-badge.paid { background: #2e7d32; color: #fff; }
            .status-badge.shipped { background: var(--primary); color: #fff; }
          </style>
        <% else %>
          <p style="color: var(--muted);">–í–∏ —â–µ –Ω–µ —Ä–æ–±–∏–ª–∏ –∑–∞–º–æ–≤–ª–µ–Ω—å. </p>
        <% end %>
      </div>

      <div>
        <h3 style="border-left: 4px solid var(--primary); padding-left: 15px;">–ú–æ—ó –≤—ñ–¥–≥—É–∫–∏</h3>
        <% if @reviews.any? %>
          <% @reviews.each do |review| %>
            <div style="background: #2b2724; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
              <strong><%= review.item.name %></strong>
              <span style="color: var(--primary); float: right;"><%= "‚òÖ" * review.rating %></span>
              <p style="margin-top: 10px; font-style: italic;"><%= review.comment %></p>
            </div>
          <% end %>
        <% else %>
          <p style="color: var(--muted);">–í–∏ —â–µ –Ω–µ –∑–∞–ª–∏—à–∏–ª–∏ –∂–æ–¥–Ω–æ–≥–æ –≤—ñ–¥–≥—É–∫—É. </p>
        <% end %>
      </div>
    </section>
  </div>
</div>